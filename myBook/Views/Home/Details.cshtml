@model myBook.Models.Sach

@{
    ViewData["Title"] = "Chi tiết sách";
}

<h2>@Model.TenSach</h2>

<div class="row">
    <div class="col-md-6">
        @if (Model.Anhs != null && Model.Anhs.Any())
        {
            <div id="bookImagesCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    @for (int i = 0; i < Model.Anhs.Count; i++)
                    {
                        var img = Model.Anhs[i];
                        <div class="carousel-item @(i == 0 ? "active" : "")">
                            <img src="@Url.Content("~/" + img.Url)" class="d-block w-100" alt="@Model.TenSach" style="max-height: 400px; object-fit: contain;">
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#bookImagesCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#bookImagesCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        }
        else
        {
            <img src="~/images/no-image.png" alt="No Image" class="img-fluid" />
        }
    </div>
    <div class="col-md-6">
        <h4>Thông tin sách</h4>
        <p><strong>Thể loại:</strong> @Model.TheLoai?.TenTheLoai</p>
        <p><strong>Tác giả:</strong> @Model.TacGia?.TenTG</p>
        <p><strong>Giá bán:</strong> @Model.GiaBan.ToString("N0") đ</p>
        <p><strong>Mô tả:</strong></p>
        <p>@Model.MoTa</p>
    </div>
</div>

<a asp-action="Index" class="btn btn-secondary mt-3">Quay lại danh sách</a>
<div class="mt-3">
    <form asp-controller="Cart" asp-action="AddToCart" method="post">
        <input type="hidden" name="sachId" value="@Model.MaSach" />
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-cart-plus"></i> Thêm vào giỏ hàng
        </button>

    </form>
</div>
@if (Model.Chuongs != null && Model.Chuongs.Any())
{
    <a asp-controller="Doc" asp-action="Chuong" asp-route-id="@Model.Chuongs.OrderBy(c => c.SoThuTu).First().MaChuong" class="btn btn-success mt-2">
        <i class="bi bi-book"></i> Đọc sách
    </a>
}
<a asp-controller="Doc" asp-action="DanhSachChuong" asp-route-sachId="@Model.MaSach" class="btn btn-info mt-2">
    <i class="bi bi-list-ul"></i> Danh sách chương
</a>

